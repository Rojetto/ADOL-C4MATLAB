% Softwaredokumentation zu DEMClasses
% Jan Winkler
% Robert Bosch GmbH, Stuttgart, FV/FLI
% 29.02.2000
%
% Variierte Fassung zu doku.sty von 
% Softwaredokumentation QuaMo-Toolbox
% AB Regelungstechnik, TUHH
% 20.12.1996
% Documentstil-Option für die 
% Dokumentation der QuaMo-Toolbox
% M. Zacharias
% 20.08.1996

% Englische Fassung

% Die Fußzeile besitzt keinen Eintrag !! Bei Bedarf doku_dmd_engl.sty benutzen !!
% !! Englische Namen für Inhaltsverzeichnis, Funktion und Block



% Breite der Seiten-Nummer im Inhaltsverzeichnis

%\def\@pnumwidth{2em}
\def\@pnumwidth{2.5em}


% Überschrift des Inhaltsverzeichnis

\def\contentsname{Contents}  % nützt offenbar gar nichts, wird von usepackage bestimmt, DF


% Zähler für die Seiten-Nummer innerhalb eines Abschnitts

\newcounter{mypage}
\stepcounter{mypage}


% Seitenformatierung (Änderung: bei jeder neuen Seite wird
%                               auch der Zähler mypage erhöht)

\def\@outputpage{\begingroup\catcode`\ =10
     \let\-\@dischyph \let\'\@acci \let\`\@accii \let\=\@acciii
    \if@specialpage
     \global\@specialpagefalse\@nameuse{ps@\@specialstyle}\fi
     \if@twoside
       \ifodd\count\z@ \let\@thehead\@oddhead \let\@thefoot\@oddfoot
            \let\@themargin\oddsidemargin
          \else \let\@thehead\@evenhead
          \let\@thefoot\@evenfoot \let\@themargin\evensidemargin
     \fi\fi
     \shipout
     \vbox{\reset@font %% RmS 91/08/15
           \normalsize \baselineskip\z@ \lineskip\z@
           \let\par\@@par %% 15 Sep 87
           \vskip \topmargin \moveright\@themargin
           \vbox{\setbox\@tempboxa
                   \vbox to\headheight{\vfil \hbox to\textwidth
                                       {\let\label\@gobble \let\index\@gobble
                                        \let\glossary\@gobble %% 21 Jun 91
                                         \@thehead}}% %% 22 Feb 87
                 \dp\@tempboxa\z@
                 \box\@tempboxa
                 \vskip \headsep
                 \box\@outputbox
                 \baselineskip\footskip
                 \hbox to\textwidth{\let\label\@gobble                           \let\index\@gobble  %% 22 Feb 87

                           \let\glossary\@gobble %% 21 Jun 91
                           \@thefoot}}}\global\@colht\textheight
           \endgroup\stepcounter{page}\stepcounter{mypage}\let\firstmark\botmark}


% Änderung des Indexeintrag: Statt des Zählers page wird section-mypage eingetragen)

\def\@wrindex#1{\let\thepage\relax
   \edef\@tempa{\write\@indexfile{\string
      \indexentry{#1}{\thesection-\arabic{mypage}}}}\expandafter\endgroup\@tempa
   \if@nobreak \ifvmode\nobreak\fi\fi\@esphack}
 

% Veränderte Kopf- und Fußzeilen

\def\ps@plain{\let\@mkboth\@gobbletwo
     \let\@oddhead\@empty\def\@oddfoot{\reset@font\rm\hfil\hspace*{-2cm}\thepage
     \hfil}\let\@evenhead\@empty\let\@evenfoot\@oddfoot}

\if@twoside
 \def\ps@headings{\let\@mkboth\markboth
  \def\@oddfoot{\hspace{-4.1cm} \sl AdolC4Matlab-Toolbox \hfil \rm\arabic{section}--\arabic{mypage}}
  \def\@evenfoot{\hspace{-4.1cm} \rm\arabic{section}--\arabic{mypage} \hfil }%       No feet.
  \def\@evenhead{\hspace{-4.1cm} {\sl \rightmark} \hfil }%        Left heading.
  \def\@oddhead{\hspace{-4.1cm}  {\sl \leftmark} \hfil {\sl \rightmark}}% Right heading.
  \def\sectionmark##1{\markboth {\ifnum \c@secnumdepth >\z@
    \thesection\hskip 1em\relax \fi ##1}{}}%
  \def\subsectionmark##1{\markright {\ifnum \c@secnumdepth >\@ne
          \fi ##1}}}
\else
 \def\ps@headings{\let\@mkboth\markboth
  \def\@oddfoot{\hspace{-4.1cm} \sl DEMClasses-Toolbox  \hfil \rm\arabic{section}--\arabic{mypage}}
  \def\@evenfoot{}%     No feet.
  \def\@oddhead{\hspace{-4.1cm}  {\sl \leftmark} \hfil {\sl \rightmark}}% Right heading.
  \def\sectionmark##1{\markboth {\ifnum \c@secnumdepth >\z@
    \thesection\hskip 1em\relax \fi ##1}{}}%
  \def\subsectionmark##1{\markright {\ifnum \c@secnumdepth >\@ne
          \fi ##1}}}
\fi

\def\ps@myheadings{\let\@mkboth\@gobbletwo
  \def\@oddfoot{\hspace{-4.1cm} \sl DEMClasses-Toolbox \hfil \rm\arabic{section}--\arabic{mypage}}
  \def\@evenfoot{\hspace{-4.1cm} \rm\arabic{section}--\arabic{mypage} \hfil }%       No feet.
  \def\@evenhead{\
hspace{-4.1cm} {\sl \rightmark} \hfil }%        Left heading.
  \def\@oddhead{\hspace{-4.1cm}  {\sl \leftmark} \hfil {\sl \rightmark}}% Right heading.
  \def\sectionmark##1{\markboth {\ifnum \c@secnumdepth >\z@
    \thesection\hskip 1em\relax \fi ##1}{}}%
  \def\subsectionmark##1{}}


% Inhaltsverzeichnis: Einfügen von zusätzlichem Zwischenraum (5ex)
%                     zwischen Überschrift und dem Rest

\def\tableofcontents{\section*{\contentsname
        \@mkboth{\uppercase{\contentsname}}{\uppercase{\contentsname}}}%
  \vspace{5ex}
  \@starttoc{toc}}


% Inhaltsverzeichnis für den Reference-Teil: Functions
\def\tableofcontentsfunc{\subsection*{Member Functions
        \@mkboth{}{}}%
  \vspace{5ex}
  \@starttoc{tor}}


%% Inhaltsverzeichnis für den Reference-Teil: Blocks
%\def\tableofcontentsblocks{\subsection*{Blocks
%        \@mkboth{}{}}%
%  \vspace{5ex}
%  \@starttoc{tob}}


% Inhaltsverzeichnis für den Reference-Teil: Datentypen
\def\tableofcontentsdatatypes{\subsection*{Member Variables %Datatypes
        \@mkboth{}{}}%
  \vspace{5ex}
  \@starttoc{tod}}



% Einträge ins Inhaltsverzeichnis: 
% Es werden die Zähler section-mysection eingetragen
% Achtung: Unterschiedliche Versionen für 
%          LaTeX 209 und LaTeX 2E!

% Original-Definition

%\def\addcontentsline#1#2#3{\if@filesw \begingroup
%\let\label\@gobble \let\index\@gobble \let\glossary\@gobble
%\def\protect##1{\string\string\string##1\string\space
%   \space}\@temptokena{\thesection--\arabic{mypage}}%
%\edef\@tempa{\write \@auxout{\string\@writefile{#1}{\protect
%     \contentsline{#2}{#3}{\the\@temptokena}}}}\@tempa
%   \if@nobreak \ifvmode\nobreak\fi\fi\endgroup\fi}

% Version für LaTeX 209

%\def\addcontentsline#1#2#3{\if@filesw \begingroup
%\let\label\@gobble \let\index\@gobble \let\glossary\@gobble
%\def\protect##1{\string\string\string##1
%   }\@temptokena{\thesection--\arabic{mypage}}%
%\edef\@tempa{\write \@auxout{\string\@writefile{#1}{\protect
%     \contentsline{#2}{#3}{\the\@temptokena}}}}\@tempa
%   \if@nobreak \ifvmode\nobreak\fi\fi\endgroup\fi}

% Version für LaTeX 2E

\def\addcontentsline#1#2#3{\if@filesw \begingroup
\let\label\@gobble \let\index\@gobble \let\glossary\@gobble
\def\protect##1{\string##1
   }\@temptokena{\thesection--\arabic{mypage}}%
\edef\@tempa{\write \@auxout{\string\@writefile{#1}{\protect
     \contentsline{#2}{#3}{\the\@temptokena}}}}\@tempa
   \if@nobreak \ifvmode\nobreak\fi\fi\endgroup\fi}


% Änderung der Gliederungsüberschriften

% fuer part, zwar nicht sehr elegant, aber Hauptsache, es funktioniert!
\renewcommand\part{\par
   \@afterindentfalse
   \secdef\@part\@spart}
\def\@part[#1]#2{%
    \ifnum \c@secnumdepth >\m@ne
      \refstepcounter{part}%
      \addcontentsline{toc}{part}{\thepart\hspace{1em}#1}%
    \else
      \addcontentsline{toc}{part}{#1}%
    \fi
    {%\parindent \z@ \raggedleft %\raggedright
     %\interlinepenalty \@M
     %\normalfont
     %\ifnum \c@secnumdepth >\m@ne
     %  \Huge\bfseries \partname~\thepart
     %  \hspace{1ex}\nobreak
     %\fi
     \vspace{10ex}
     \begin{center} \hspace{-5cm} \Huge \bfseries  \partname~\thepart \hspace{1ex}#2 \end{center} 
     \markboth{}{}\par}%
    \nobreak
    \vskip 3ex
    \@afterheading \clearpage}
\def\@spart#1{%
    {\parindent \z@ \raggedleft %\raggedright
     \interlinepenalty \@M
     \normalfont
     \huge \bfseries #1\par}%
     \nobreak
     \vskip 3ex
     \@afterheading}
\def\@endpart{\vfil\newpage
              \if@twoside
                \hbox{}%
                \thispagestyle{empty}%
                \newpage
              \fi
              \if@tempswa
                \twocolumn
              \fi}



\def\section{\@startsection{section}{1}{-4cm}{-3.5ex plus-1ex 
     minus  -.2ex }{2.3ex plus.2ex}{\reset@font\Huge\bf}}

\def\subsection{\@startsection{subsection}{2}{-4cm}{-3.25ex plus-1ex
     minus-.2ex}{1.5ex plus.2ex}{\reset@font\LARGE\bf}}

\def\subsubsection{\@startsection{subsubsection}{3}{\z@}{-3.25ex plus
     -1ex minus-.2ex}{1.5ex plus.2ex}{\reset@font\Large\bf}}

\def\paragraph{\@startsection{paragraph}{4}{-1cm}{-2.75ex plus
     -1ex minus-.2ex}{1ex plus.2ex}{\reset@font\large\bf}}

\def\subparagraph{\@startsection
     {subparagraph}{4}{\parindent}{3.25ex plus1ex minus
     .2ex}{-1em}{\reset@font\normalsize\bf}}


% Änderung des Literaturverzeichnis

\def\thebibliography#1{\subsection*{\refname\@mkboth
  {\leftmark}{\refname}}
            \vspace{-3ex}
            \unitlength1cm
            \begin{picture}(12,0)
                           \put(-4,0){\line(1,0){16}}
            \end{picture}
  \list
  {\@biblabel{\arabic{enumiv}}}{\settowidth\labelwidth{\@biblabel{#1}}%
    \leftmargin\labelwidth
    \advance\leftmargin\labelsep
    \usecounter{enumiv}%
    \let\p@enumiv\@empty
    \def\theenumiv{\arabic{enumiv}}}%
    \def\newblock{\hskip .11em plus.33em minus.07em}%
    \sloppy\clubpenalty4000\widowpenalty4000
    \sfcode`\.=1000\relax}


% Änderung der Befehle \ref, \pageref, \label auf die Seitennumerierung
% \thesection-\arabic{mypage}

\def\ref#1{\@ifundefined{r@#1}{{\reset@font\bf ??}\@warning
   {Reference `#1' on page  \thesection-\arabic{mypage} \space
    undefined}}{\edef\@tempa{\@nameuse{r@#1}}\expandafter
    \@car\@tempa \@nil\null}}
 
\def\pageref#1{\@ifundefined{r@#1}{{\reset@font\bf ??}\@warning
   {Reference `#1' on page \thesection-\arabic{mypage} \space
    undefined}}{\edef\@tempa{\@nameuse{r@#1}}\expandafter
    \@cdr\@tempa\@nil\null}}
 
\def\label#1{\@bsphack\if@filesw {\let\thepage\relax
   \def\protect{\noexpand\noexpand\noexpand}%
   \edef\@tempa{\write\@auxout{\string
      \newlabel{#1}{{\@currentlabel}{\thesection-\arabic{mypage}}}}}%
   \expandafter}\@tempa
   \if@nobreak \ifvmode\nobreak\fi\fi\fi\@esphack}
 
